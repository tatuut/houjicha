// ほうじ茶 新機能テストファイル
// Tab補完、ホバー、as構文、$定数展開をテスト

// ============================================
// 1. as構文テスト - 規範を定数として定義
// ============================================

#窃盗罪^刑法235条 <= 甲がコンビニで商品を持ち去った行為:
    // (他人の財物)の上にマウスを置くとホバー説明が表示される
    (他人の財物): %他人が所有する財産的価値のある有体物 <= 商品はコンビニの所有物
    (不法領得の意思): %権利者を排除して他人の物を自己の所有物とし、その経済的用法に従いこれを利用し又は処分する意思 <= 【あてはめ】

    // as構文で規範を定数として定義（後で$で参照可能）
    (窃取): %占有者の意思に反して占有を自己又は第三者に移転すること as 窃取の定義 <= 店員の意思に反して持ち去った

    // 故意の規範も定数化
    %故意 as 故意の定義 <= 商品であることを認識しつつ持ち去った

    // 不法領得の意思も定数化
    %権利者を排除して他人の物を自己の所有物とし、その経済的用法に従いこれを利用し又は処分する意思 as 不法領得の意思 <= 自己の物として利用する意思あり

>> 甲に窃盗罪が成立する

// ============================================
// 2. $定数参照テスト - 定義した規範を再利用
// ============================================

#窃盗罪^刑法235条 <= 乙がスーパーで食品を万引きした行為:
    (他人の財物) <= 食品はスーパーの所有物
    (故意): %事実の認識・認容 <= 【あてはめ】
    (不法領得の意思): %権利者を排除して他人の物を自己の所有物とし、その経済的用法に従いこれを利用し又は処分する意思 <= 【あてはめ】
    // $で上で定義した定数を参照（展開される）
    (窃取): $窃取の定義 <= レジを通さずに持ち出した

    // 故意も定数参照
    $故意の定義 <= 万引きの認識あり

    // 不法領得の意思も定数参照
    $不法領得の意思 <= 食べるつもりだった

>> 乙に窃盗罪が成立する

// ============================================
// 3. Tab補完テスト
// ============================================
// 以下の位置でTabキーを押すと補完候補が表示される

#詐欺罪^刑法246条1項 <= 丙の行為:
    // ()の中でTabを押すと要件候補が表示される
    (欺罔行為): %人を錯誤に陥らせる行為 <= 虚偽の説明をした

    // %の後でTabを押すと規範候補が表示される（条文データベースから）
    (錯誤): %欺罔行為により財産的処分行為をする動機に錯誤が生じること <= 被害者は真実と信じた

    (財産的処分行為) <= 金銭を交付した

    (財産上の損害) <= 金銭を失った

    %故意 <= 認識認容あり

    // ?の後でTabを押すと論点テンプレートが表示される
    ? 欺罔行為の意義 ~> 詐欺罪の実行行為の範囲が問題 => %人を錯誤に陥らせる行為

>> 丙に詐欺罪が成立する

// ============================================
// 4. ホバー説明テスト
// ============================================
// マウスカーソルを各要素の上に置くと詳細情報が表示される

#横領罪^刑法252条1項 <= 丁の行為:
    // (自己の占有)にホバーすると要件の詳細が表示
    +(自己の占有する): %委託信任関係に基づく占有 <= 業務上預かっていた

    // (他人の物)にホバー
    +(他人の物) <= 会社の金銭

    // %規範にホバーすると規範の詳細が表示
    +(横領): %不法領得の意思を実現する一切の行為 <= 自己の口座に振り込んだ

    +%故意 <= 認識認容あり

>> 丁に横領罪が成立する

// ============================================
// 5. 未定義定数参照エラーテスト
// ============================================

#背任罪^刑法247条 <= 戊の行為:
    (他人のためにその事務を処理する者) <= 会社の取締役

    // 以下は未定義の定数を参照 → エラーが表示されるはず
    // $存在しない定数 <= これはエラー

    (任務違背行為) <= 会社に不利な取引をした

    %故意 <= 認識認容あり

    %図利加害目的 <= 自己の利益を図る目的

>> 戊に背任罪が成立する
